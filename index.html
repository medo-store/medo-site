
<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Medo Gaming Store</title>

  <style>
    :root{
      --bg0:#070A12;
      --bg1:#0B1230;
      --panel:#0E183B;
      --card:#0C1736;
      --text:#F6F7FF;
      --muted:#B9C1D9;
      --border:rgba(255,255,255,.10);
      --accent:#E11D48;
      --accent2:#38BDF8;
      --good:#22C55E;

      --radius:14px;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Segoe UI", Tahoma, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 15% 8%, rgba(56,189,248,.16), transparent 60%),
        radial-gradient(900px 600px at 85% 0%, rgba(225,29,72,.14), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      min-height:100vh;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1200px;margin:0 auto;padding:10px 12px}

    /* Sticky header */
    .nav{
      position:sticky;top:0;z-index:60;
      background:rgba(7,10,18,.72);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--border);
    }
    .nav-inner{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900;letter-spacing:.2px;white-space:nowrap}
    .dot{
      width:10px;height:10px;border-radius:999px;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      box-shadow:0 0 0 4px rgba(56,189,248,.10);
    }

    .searchWrap{flex:1;min-width:220px;display:flex;align-items:center;gap:8px}
    .search{
      flex:1;
      padding:11px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      color:var(--text);
      outline:none;
    }

    .iconBtn{
      display:inline-flex;align-items:center;justify-content:center;
      gap:8px;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      color:var(--text);
      cursor:pointer;
      user-select:none;
    }
    .iconBtn:hover{filter:brightness(1.08)}
    .rightBox{margin-inline-start:auto;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .pillCount{
      min-width:22px;height:22px;border-radius:999px;
      display:inline-flex;align-items:center;justify-content:center;
      background:rgba(56,189,248,.16);
      border:1px solid rgba(56,189,248,.35);
      font-weight:900;font-size:12px;padding:0 6px;
    }

    .userChip{
      display:inline-flex;align-items:center;gap:8px;
      padding:9px 10px;border-radius:999px;
      border:1px solid rgba(56,189,248,.35);
      background:rgba(56,189,248,.10);
      cursor:pointer;white-space:nowrap;
      font-weight:900;font-size:13px;
    }
    .avatarSmall{
      width:22px;height:22px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.07);
      display:inline-flex;align-items:center;justify-content:center;
      overflow:hidden;
      font-size:11px;
    }
    .avatarSmall img{width:100%;height:100%;object-fit:cover}

    /* Sections */
    .sectionTitle{
      margin:18px 0 8px;
      font-size:15px;
      font-weight:900;
      display:flex;align-items:center;gap:10px;
    }
    .sectionHint{color:var(--muted);font-weight:800;font-size:12px}
    .spacer{height:18px}

    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    @media (max-width:1050px){ .grid{grid-template-columns:repeat(3,1fr);} }
    @media (max-width:760px){ .grid{grid-template-columns:repeat(2,1fr);} }
    @media (max-width:460px){ .grid{grid-template-columns:1fr;} }

    .card{
      background:rgba(12,23,54,.72);
      border:1px solid var(--border);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
      display:flex;flex-direction:column;
      min-height:230px;
    }
    .thumb{
      height:96px;
      background:
        radial-gradient(180px 120px at 25% 30%, rgba(56,189,248,.22), transparent 65%),
        radial-gradient(180px 120px at 75% 0%, rgba(225,29,72,.18), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-bottom:1px solid var(--border);
      display:flex;align-items:center;justify-content:center;
      font-weight:900;letter-spacing:.7px;font-size:12px;
      position:relative;
    }
    .content{padding:10px 10px 12px;display:flex;flex-direction:column;gap:8px;flex:1}
    .name{margin:0;font-size:13px;font-weight:900}
    .meta{margin:0;font-size:12px;color:var(--muted);line-height:1.4}
    .priceRow{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .price{margin:0;font-size:12px;font-weight:900}

    /* Actions */
    .actions{display:flex;gap:8px;margin-top:auto;flex-wrap:wrap}
    .btn{
      flex:1;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.05);
      color:var(--text);
      padding:10px 10px;
      font-weight:900;font-size:12px;
      cursor:pointer;
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      min-width:120px;
    }
    .btn:hover{filter:brightness(1.08)}
    .btnRed{background:linear-gradient(135deg, rgba(225,29,72,1), rgba(225,29,72,.82));border-color:transparent}

    /* Overlay / drawer / modal */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.58);display:none;z-index:80}
    .overlay.show{display:block}

    /* âœ… IMPORTANT: drawer is ALWAYS off-screen by default */
    .drawer{
      position:fixed;top:0;bottom:0;
      width:min(360px, 92vw);
      background:rgba(14,24,59,.92);
      backdrop-filter: blur(10px);
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      z-index:90;
      transition: transform .22s ease;
      display:flex;flex-direction:column;

      /* Off-screen by default */
      transform: translateX(110%);
    }
    /* âœ… show only on click */
    .drawer.show{ transform: translateX(0) !important; }

    .drawerHeader{
      padding:12px;border-bottom:1px solid var(--border);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .drawerTitle{font-weight:900}
    .drawerBody{padding:12px;overflow:auto}
    .drawerSection{margin:10px 0 16px}
    .drawerLabel{font-weight:900;margin:0 0 8px}
    .drawerList{display:flex;flex-direction:column;gap:8px}
    .linkRow{
      padding:10px 10px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      cursor:pointer;
    }
    .linkRow:hover{filter:brightness(1.08)}
    .mini{font-size:12px;color:var(--muted);font-weight:800}

    .note{
      padding:10px 10px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--muted);
      font-weight:800;font-size:12px;line-height:1.5;
    }
    .note.err{background:rgba(225,29,72,.18);border-color:rgba(225,29,72,.45);color:#fff}
    .note.ok{background:rgba(34,197,94,.14);border-color:rgba(34,197,94,.35);color:#fff}

    .modal{position:fixed;inset:0;display:none;z-index:95;align-items:center;justify-content:center;padding:14px}
    .modal.show{display:flex}
    .modalBox{
      width:min(640px, 96vw);
      background:rgba(14,24,59,.94);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modalHeader{
      padding:12px;border-bottom:1px solid var(--border);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .modalTitle{font-weight:900}
    .modalBody{padding:12px}
    .stack{display:flex;flex-direction:column;gap:10px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row > *{flex:1}
    .row .tight{flex:0 0 auto}

    .input{
      width:100%;
      padding:11px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      color:var(--text);
      outline:none;
    }
    .select{
      width:100%;
      padding:11px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      color:var(--text);
      outline:none;
      font-weight:900;
    }

    /* Cart */
    .cartItem{
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      border-radius:14px;
      padding:10px;
      display:flex;align-items:flex-start;justify-content:space-between;gap:10px;
    }
    .cartLeft{display:flex;gap:10px;flex:1}
    .cartThumb{
      width:54px;height:54px;border-radius:14px;
      border:1px solid var(--border);
      background:
        radial-gradient(40px 30px at 20% 20%, rgba(56,189,248,.25), transparent 65%),
        radial-gradient(40px 30px at 80% 0%, rgba(225,29,72,.18), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      overflow:hidden;
      flex:0 0 auto;
      display:flex;align-items:center;justify-content:center;
      font-weight:900;font-size:11px;opacity:.9;
    }
    .cartName{font-weight:900;font-size:13px;margin:0 0 4px}
    .cartMeta{margin:0;color:var(--muted);font-size:12px;font-weight:800}
    .qtyRow{display:flex;gap:8px;align-items:center;margin-top:8px;flex-wrap:wrap}
    .qtyBtn{
      width:34px;height:34px;border-radius:10px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.05);
      color:var(--text);
      font-weight:900;
      cursor:pointer;
    }
    .qtyNum{min-width:34px;text-align:center;font-weight:900}
    .removeBtn{
      border:1px solid rgba(225,29,72,.35);
      background:rgba(225,29,72,.12);
      color:rgba(246,247,255,.95);
      font-weight:900;cursor:pointer;
      padding:8px 10px;border-radius:10px;
      white-space:nowrap;
    }
    .detailsBtn{
      border:1px solid rgba(56,189,248,.35);
      background:rgba(56,189,248,.10);
      color:rgba(246,247,255,.95);
      font-weight:900;cursor:pointer;
      padding:8px 10px;border-radius:10px;
      white-space:nowrap;
    }
    .totalBar{
      margin-top:10px;
      border:1px solid rgba(56,189,248,.35);
      background:rgba(56,189,248,.10);
      border-radius:14px;
      padding:10px;
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      cursor:pointer;
      user-select:none;
    }

    /* Footer */
    .footer{
      margin-top:18px;border-top:1px solid var(--border);
      padding:14px 0 22px;
      color:var(--muted);
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
    }
    .social{
      display:inline-flex;align-items:center;gap:8px;
      padding:9px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      font-weight:900;font-size:12px;
    }
    .social:hover{filter:brightness(1.08)}
    .mutedRight{margin-inline-start:auto;font-weight:900;font-size:12px;color:rgba(185,193,217,.9)}
  </style>
</head>

<body>
  <div class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <span class="dot"></span>
        <span id="brandText">Medo Gaming Store</span>
      </div>

      <div class="searchWrap">
        <input id="search" class="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø«..." />
        <button class="iconBtn" id="filterBtn" title="Filter">
          <span style="display:inline-block;line-height:0">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M4 6h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M7 12h13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M10 18h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M4 3h10" stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity=".75"/>
            </svg>
          </span>
        </button>
      </div>

      <div class="rightBox">
        <button class="iconBtn" id="inboxBtn" title="Inbox">ğŸ”” <span class="pillCount" id="inboxCount">0</span></button>
        <button class="iconBtn" id="gemsBtn" title="Bonus">ğŸ’ <span class="pillCount" id="gemsCount">0</span></button>
        <button class="iconBtn" id="cartBtn" title="Cart">ğŸ›’ <span class="pillCount" id="cartCount">0</span></button>

        <button class="iconBtn" id="authBtn" title="Account">ğŸ‘¤ <span id="authText">ØªØ³Ø¬ÙŠÙ„</span></button>

        <div class="userChip" id="userChip" style="display:none" title="User">
          <span class="avatarSmall" id="avatarSmall">U</span>
          <span id="userNameText">User</span>
        </div>

        <!-- âœ… menu button ALWAYS visible -->
        <button class="iconBtn" id="menuBtn" title="Menu">â˜°</button>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="sectionTitle">ğŸ”¥ Top <span class="sectionHint">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§</span></div>
    <div id="gridTop" class="grid"></div>

    <div class="spacer"></div>

    <div class="sectionTitle">ğŸ Offers <span class="sectionHint">Ø¹Ø±ÙˆØ¶</span></div>
    <div id="gridOffers" class="grid"></div>

    <div class="spacer"></div>

    <div class="sectionTitle">ğŸ® Games</div>
    <div id="gridGames" class="grid"></div>

    <div class="spacer"></div>

    <div class="sectionTitle">ğŸ’» Programs</div>
    <div id="gridPrograms" class="grid"></div>

    <div class="spacer"></div>

    <div class="sectionTitle">ğŸ§¾ Accounts</div>
    <div id="gridAccounts" class="grid"></div>

    <div class="footer">
      <a class="social" href="https://wa.me/201006760663" target="_blank" rel="noreferrer">WhatsApp</a>
      <a class="social" href="https://www.instagram.com/medo__rami" target="_blank" rel="noreferrer">Instagram</a>
      <a class="social" href="https://www.facebook.com/share/1AScQqiSqq/" target="_blank" rel="noreferrer">Facebook</a>
      <a class="social" href="mailto:medorami77@gmail.com">Email</a>
      <span class="mutedRight">Â© <span id="year"></span> Medo Gaming</span>
    </div>
  </div>

  <div class="overlay" id="overlay"></div>

  <!-- âœ… MENU DRAWER -->
  <div class="drawer" id="menuDrawer">
    <div class="drawerHeader">
      <div class="drawerTitle">Menu</div>
      <button class="iconBtn" id="menuClose">âœ•</button>
    </div>
    <div class="drawerBody">
      <div class="drawerSection" id="drawerUserBox" style="display:none">
        <div class="note ok" id="drawerUserNote"></div>
        <div class="row">
          <button class="btn" id="editProfileBtn">Edit profile</button>
          <button class="btn" id="logoutBtn">Logout</button>
        </div>
      </div>

      <div class="drawerSection">
        <p class="drawerLabel">Quick</p>
        <div class="drawerList">
          <div class="linkRow" data-scroll="gridTop"><span>Top</span><span class="mini">â†’</span></div>
          <div class="linkRow" data-scroll="gridOffers"><span>Offers</span><span class="mini">â†’</span></div>
          <div class="linkRow" data-scroll="gridGames"><span>Games</span><span class="mini">â†’</span></div>
          <div class="linkRow" data-scroll="gridPrograms"><span>Programs</span><span class="mini">â†’</span></div>
          <div class="linkRow" data-scroll="gridAccounts"><span>Accounts</span><span class="mini">â†’</span></div>
          <div class="linkRow" id="openContactRow"><span>Contact</span><span class="mini">â†’</span></div>
          <div class="linkRow" id="openReviewsRow"><span>Reviews</span><span class="mini">â†’</span></div>
          <div class="linkRow" id="openGiftRow"><span>Send Gift</span><span class="mini">â†’</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- âœ… FILTER DRAWER -->
  <div class="drawer" id="filterDrawer">
    <div class="drawerHeader">
      <div class="drawerTitle">Filter</div>
      <button class="iconBtn" id="filterClose">âœ•</button>
    </div>
    <div class="drawerBody">
      <div class="note">Ø§Ø®ØªØ§Ø± Ø§Ù„Ù‚Ø³Ù… ÙˆØ§Ù„ØªØ±ØªÙŠØ¨ ÙˆØ§Ù„Ø³Ø¹Ø± ÙˆØ¨Ø¹Ø¯ÙŠÙ† ØªØ·Ø¨ÙŠÙ‚.</div>

      <div class="drawerSection">
        <p class="drawerLabel">Category</p>
        <select class="select" id="filterCategory">
          <option value="all">All</option>
          <option value="games">Games</option>
          <option value="programs">Programs</option>
          <option value="accounts">Accounts</option>
        </select>
      </div>

      <div class="drawerSection">
        <p class="drawerLabel">Sort</p>
        <select class="select" id="filterSort">
          <option value="new">Newest</option>
          <option value="old">Oldest</option>
          <option value="low">Low â†’ High</option>
          <option value="high">High â†’ Low</option>
        </select>
      </div>

      <div class="drawerSection">
        <p class="drawerLabel">Price</p>
        <div class="row">
          <select class="select" id="priceMode">
            <option value="off">Off</option>
            <option value="eq">Equal</option>
            <option value="lte">â‰¤</option>
            <option value="gte">â‰¥</option>
          </select>
          <input class="input" id="priceValue" type="number" min="0" placeholder="Ù…Ø«Ù„Ø§Ù‹ 300" />
        </div>
      </div>

      <button class="btn btnRed" id="applyFilterBtn">Apply</button>
    </div>
  </div>

  <!-- âœ… MODALS (same as before) -->
  <div class="modal" id="contactModal"><div class="modalBox"><div class="modalHeader"><div class="modalTitle">Contact</div><button class="iconBtn" id="contactClose">âœ•</button></div><div class="modalBody"><div class="stack">
    <a class="btn" href="https://wa.me/201006760663" target="_blank">WhatsApp</a>
    <a class="btn" href="https://www.instagram.com/medo__rami" target="_blank">Instagram</a>
    <a class="btn" href="https://www.facebook.com/share/1AScQqiSqq/" target="_blank">Facebook</a>
    <a class="btn" href="mailto:medorami77@gmail.com">Email</a>
  </div></div></div></div>

  <div class="modal" id="reviewsModal"><div class="modalBox"><div class="modalHeader"><div class="modalTitle">Reviews</div><button class="iconBtn" id="reviewsClose">âœ•</button></div><div class="modalBody">
    <div class="stack">
      <div class="note">Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø¨ØªØªØ®Ø²Ù† Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø² (Demo).</div>
      <div class="row"><input class="input" id="reviewText" placeholder="Ø§ÙƒØªØ¨ Ø±Ø£ÙŠÙƒ..." /><button class="btn btnRed tight" id="addReviewBtn" style="flex:0 0 auto">Post</button></div>
      <div class="stack" id="reviewsList"></div>
    </div>
  </div></div></div>

  <div class="modal" id="giftModal"><div class="modalBox"><div class="modalHeader"><div class="modalTitle">Send Gift</div><button class="iconBtn" id="giftClose">âœ•</button></div><div class="modalBody">
    <div class="stack">
      <div class="note">Ø§ÙƒØªØ¨ Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…. Ù„Ùˆ Ù…Ø´ Ù…Ø³Ø¬Ù„ Ù‡ÙŠØ±ÙØ¶.</div>
      <input class="input" id="giftToEmail" type="email" placeholder="Receiver email" />
      <div class="row">
        <select class="select" id="giftType"><option value="bonus">Bonus</option><option value="product">Product ID</option></select>
        <input class="input" id="giftAmount" type="number" min="1" placeholder="Amount / Product ID" />
      </div>
      <button class="btn btnRed" id="sendGiftBtn">Send</button>
      <div class="note err" id="giftErr" style="display:none"></div>
      <div class="note ok" id="giftOk" style="display:none"></div>
    </div>
  </div></div></div>

  <script>
    /* ===== overlay + drawers (FIXED) ===== */
    const $ = (id)=>document.getElementById(id);

    const overlay = $("overlay");
    const menuDrawer = $("menuDrawer");
    const filterDrawer = $("filterDrawer");

    function openOverlay(){ overlay.classList.add("show"); }
    function closeOverlay(){ overlay.classList.remove("show"); }

    function closeAll(){
      closeOverlay();
      menuDrawer.classList.remove("show");
      filterDrawer.classList.remove("show");
      // close modals
      ["contactModal","reviewsModal","giftModal"].forEach(id=>$(id).classList.remove("show"));
    }

    overlay.addEventListener("click", closeAll);

    function openDrawer(drawer){
      openOverlay();
      drawer.classList.add("show");
    }

    /* âœ… Ensure drawers never open on load */
    window.addEventListener("load", ()=>{
      menuDrawer.classList.remove("show");
      filterDrawer.classList.remove("show");
      closeOverlay();
    });

    /* âœ… Buttons */
    $("menuBtn").onclick = ()=> openDrawer(menuDrawer);
    $("menuClose").onclick = closeAll;

    $("filterBtn").onclick = ()=> openDrawer(filterDrawer);
    $("filterClose").onclick = closeAll;

    $("applyFilterBtn").onclick = ()=> {
      closeAll();
      renderAll();
    };

    /* âœ… Menu links scroll */
    document.querySelectorAll("[data-scroll]").forEach(x=>{
      x.addEventListener("click", ()=>{
        const el = document.getElementById(x.dataset.scroll);
        if(!el) return;
        closeAll();
        window.scrollTo({ top: el.getBoundingClientRect().top + window.scrollY - 80, behavior:"smooth" });
      });
    });

    /* âœ… Open modal rows */
    $("openContactRow").onclick = ()=>{ closeAll(); openOverlay(); $("contactModal").classList.add("show"); };
    $("contactClose").onclick = closeAll;

    $("openReviewsRow").onclick = ()=>{ closeAll(); renderReviews(); openOverlay(); $("reviewsModal").classList.add("show"); };
    $("reviewsClose").onclick = closeAll;

    $("openGiftRow").onclick = ()=>{ closeAll(); openOverlay(); $("giftModal").classList.add("show"); };
    $("giftClose").onclick = closeAll;

    /* ===== Products demo ===== */
    const products = [
      { id: 1, type:"games", name:"Game #1", desc:"ÙˆØµÙ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¹Ø¨Ø©", price:250, top:true, images:["1A","1B","1C"] },
      { id: 2, type:"games", name:"Game #2", desc:"ÙˆØµÙ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¹Ø¨Ø©", price:180, offer:true, images:["2A","2B","2C"] },
      { id: 3, type:"games", name:"Game #3", desc:"ÙˆØµÙ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¹Ø¨Ø©", price:300, images:["3A","3B","3C"] },
      { id: 4, type:"games", name:"Game #4", desc:"ÙˆØµÙ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¹Ø¨Ø©", price:120, offer:true, images:["4A","4B","4C"] },

      { id: 11, type:"programs", name:"Program #1", desc:"ÙˆØµÙ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬", price:150, top:true, images:["11A","11B","11C"] },
      { id: 12, type:"programs", name:"Program #2", desc:"ÙˆØµÙ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬", price:90, images:["12A","12B","12C"] },
      { id: 13, type:"programs", name:"Program #3", desc:"ÙˆØµÙ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬", price:220, offer:true, images:["13A","13B","13C"] },
      { id: 14, type:"programs", name:"Program #4", desc:"ÙˆØµÙ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬", price:60, images:["14A","14B","14C"] },

      { id: 21, type:"accounts", name:"Account #1", desc:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆÙ†Øª (ØªÙ‚Ø¯Ø± ØªØ·ÙˆÙ‘Ù„Ù‡Ø§)", price:700, top:true, images:["21A","21B","21C","21D"] },
      { id: 22, type:"accounts", name:"Account #2", desc:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆÙ†Øª (ØªÙ‚Ø¯Ø± ØªØ·ÙˆÙ‘Ù„Ù‡Ø§)", price:350, offer:true, images:["22A","22B","22C"] },
      { id: 23, type:"accounts", name:"Account #3", desc:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆÙ†Øª (ØªÙ‚Ø¯Ø± ØªØ·ÙˆÙ‘Ù„Ù‡Ø§)", price:200, images:["23A","23B","23C"] },
      { id: 24, type:"accounts", name:"Account #4", desc:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆÙ†Øª (ØªÙ‚Ø¯Ø± ØªØ·ÙˆÙ‘Ù„Ù‡Ø§)", price:450, images:["24A","24B","24C"] },
    ];

    const searchEl = $("search");

    function money(x){ return `EGP ${Math.max(0, Math.round(x))}`; }

    function cardHTML(p){
      return `
        <div class="card">
          <div class="thumb">${p.type.toUpperCase()}</div>
          <div class="content">
            <p class="name">${p.name}</p>
            <p class="meta">${p.desc || ""}</p>
            <div class="priceRow">
              <p class="price">${money(p.price)}</p>
              <span class="sectionHint">#${p.id}</span>
            </div>
            <div class="actions">
              <button class="btn">â„¹ï¸ Details</button>
              <button class="btn">ğŸ›’ Add to cart</button>
              <button class="btn btnRed">âš¡ Buy</button>
            </div>
          </div>
        </div>
      `;
    }

    function applyFilters(list){
      const q = (searchEl.value||"").toLowerCase().trim();
      const cat = $("filterCategory").value;
      const sort = $("filterSort").value;
      const pm = $("priceMode").value;
      const pv = Number($("priceValue").value);

      let out = [...list];
      if(q) out = out.filter(p => (p.name + " " + (p.desc||"")).toLowerCase().includes(q));
      if(cat !== "all") out = out.filter(p => p.type === cat);

      if(pm !== "off" && !Number.isNaN(pv)){
        if(pm === "eq") out = out.filter(p=>p.price === pv);
        if(pm === "lte") out = out.filter(p=>p.price <= pv);
        if(pm === "gte") out = out.filter(p=>p.price >= pv);
      }

      if(sort === "new") out.sort((a,b)=> b.id - a.id);
      if(sort === "old") out.sort((a,b)=> a.id - b.id);
      if(sort === "low") out.sort((a,b)=> a.price - b.price);
      if(sort === "high") out.sort((a,b)=> b.price - a.price);

      return out;
    }

    function renderAll(){
      const filtered = applyFilters(products);
      const tops = filtered.filter(p=>p.top);
      const offers = filtered.filter(p=>p.offer);

      $("gridTop").innerHTML = tops.length ? tops.map(cardHTML).join("") : `<div class="note">Ù…ÙÙŠØ´ ØªÙˆØ¨ Ø­Ø§Ù„ÙŠØ§Ù‹.</div>`;
      $("gridOffers").innerHTML = offers.length ? offers.map(cardHTML).join("") : `<div class="note">Ù…ÙÙŠØ´ Ø¹Ø±ÙˆØ¶ Ø­Ø§Ù„ÙŠØ§Ù‹.</div>`;

      $("gridGames").innerHTML = filtered.filter(p=>p.type==="games").map(cardHTML).join("");
      $("gridPrograms").innerHTML = filtered.filter(p=>p.type==="programs").map(cardHTML).join("");
      $("gridAccounts").innerHTML = filtered.filter(p=>p.type==="accounts").map(cardHTML).join("");
    }

    renderAll();
    searchEl.addEventListener("input", renderAll);

    /* ===== Reviews demo ===== */
    const LS_REVIEWS="mgs_reviews_demo";
    function loadReviews(){ try{ return JSON.parse(localStorage.getItem(LS_REVIEWS)||"[]"); }catch{ return []; } }
    function saveReviews(r){ localStorage.setItem(LS_REVIEWS, JSON.stringify(r)); }
    function escapeHtml(s){ return String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"); }

    function renderReviews(){
      const list = $("reviewsList");
      const reviews = loadReviews();
      if(!reviews.length){
        list.innerHTML = `<div class="note">Ù…ÙÙŠØ´ Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ù„Ø³Ù‡.</div>`;
        return;
      }
      list.innerHTML = reviews.map(r=>{
        const time = new Date(r.at).toLocaleString();
        return `<div class="note"><strong>${r.by}</strong> â€” ${time}<br>${escapeHtml(r.text)}</div>`;
      }).join("");
    }

    $("addReviewBtn").onclick = ()=>{
      const text = ($("reviewText").value||"").trim();
      if(!text) return;
      const reviews = loadReviews();
      reviews.unshift({ at: new Date().toISOString(), by:"Ø²Ø§Ø¦Ø±", text });
      saveReviews(reviews);
      $("reviewText").value="";
      renderReviews();
    };

    /* Year */
    $("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
